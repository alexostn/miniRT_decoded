1. –ö–æ–º–ø–∏–ª—è—Ü–∏—è —Å –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
–ü–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å —Ñ–ª–∞–≥–æ–º -g, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã:

bash
make re CFLAGS="-g -Wall -Wextra -Werror"
2. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Valgrind
–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É –ø–æ–¥ Valgrind:

bash
valgrind --leak-check=full --show-leak-kinds=all --track-origins=yes --log-file=valgrind.log ./miniRT scene.rt
–§–ª–∞–≥–∏:

--leak-check=full: –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —É—Ç–µ—á–µ–∫.

--show-leak-kinds=all: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã —É—Ç–µ—á–µ–∫.

--track-origins=yes: –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

--log-file=valgrind.log: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç—á—ë—Ç –≤ —Ñ–∞–π–ª.

3. –ê–Ω–∞–ª–∏–∑ –æ—Ç—á—ë—Ç–∞
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏:

bash
cat valgrind.log
–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –ø—Ä–∏ —É—Ç–µ—á–∫–µ:

text
==12345== 40 bytes in 1 blocks are definitely lost in loss record 1 of 2
==12345==    at 0x483B7F3: malloc (vg_replace_malloc.c:307)
==12345==    by 0x109223: image_create (image.c:15)
==12345==    by 0x109D7A: init_graphics (window.c:45)
–ó–¥–µ—Å—å –≤–∏–¥–Ω–æ, —á—Ç–æ 40 –±–∞–π—Ç –Ω–µ –±—ã–ª–∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã –≤ —Ñ—É–Ω–∫—Ü–∏–∏ image_create.

4. –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
–ù–µ–æ—Å–≤–æ–±–æ–∂–¥—ë–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (definitely lost):
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–∂–¥—ã–π malloc/calloc –∏–º–µ–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π free.

–ü—Ä–∏–º–µ—Ä:

c
t_image *img = image_create(mlx, width, height);
// ...
image_destroy(img);  // –ù–µ –∑–∞–±—ã—Ç—å –≤—ã–∑–≤–∞—Ç—å!
–ö–æ—Å–≤–µ–Ω–Ω—ã–µ —É—Ç–µ—á–∫–∏ (indirectly lost):
–ß–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç, –µ—Å–ª–∏ –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ.

–û—à–∏–±–∫–∏ MiniLibX:
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —É—Ç–µ—á–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω—ã —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–∞–±–æ—Ç–æ–π MiniLibX. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç–µ mlx_destroy_image, mlx_destroy_window –∏ mlx_destroy_display (–¥–ª—è Linux).

5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã
–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏: –ó–∞–ø—É—Å–∫–∞–π—Ç–µ Valgrind –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω –∏ –¥–µ–π—Å—Ç–≤–∏–π (–∑–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫).

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ suppression-—Ñ–∞–π–ª—ã: –ï—Å–ª–∏ MiniLibX –≤—ã–∑—ã–≤–∞–µ—Ç –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è, —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª-–∏—Å–∫–ª—é—á–µ–Ω–∏–µ:

bash
valgrind --suppressions=mlx.supp ./miniRT ...
–ü—Ä–∏–º–µ—Ä suppression-—Ñ–∞–π–ª–∞ –¥–ª—è MiniLibX.

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è: –î–æ–±–∞–≤—å—Ç–µ —Ü–µ–ª—å –≤ Makefile:

makefile
check:
    valgrind --leak-check=full --show-leak-kinds=all ./miniRT scene.rt
–ü—Ä–∏–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞:
text
==12345== HEAP SUMMARY:
==12345==     in use at exit: 0 bytes in 0 blocks
==12345==   total heap usage: 45 allocs, 45 frees, 5,678 bytes allocated
==12345== 
==12345== All heap blocks were freed -- no leaks are possible
–ï—Å–ª–∏ –≤ –≤—ã–≤–æ–¥–µ –µ—Å—Ç—å 0 bytes in 0 blocks ‚Äî —É—Ç–µ—á–µ–∫ –Ω–µ—Ç! üéâ