# >>>>>>>>>>>>>>>>>> Твой рабочий процесс (pipeline): >>>>>>>>>>>>>>>>>>
Прочитай сценарий в книге "The Raytracer Challenge". 

Напиши тестовую функцию для этого сценария в файле book_tests.c. Например, test_chX_имя_фичи().

Добавь вызов этой тестовой функции в main() внутри book_tests.c.

Если ты реализовал новую функциональность в новом .c файле в src/ (например, src/canvas.c), добавь этот файл в список BOOK_TEST_MODULE_SRCS в Makefile.

Запусти make booktest.

Если функция еще не реализована, тест, скорее всего, не скомпилируется (если ты используешь новую функцию) или упадет. Это нормально (Red фаза в TDD).

Напиши минимально необходимый код в соответствующем .c файле в src/ (например, в src/tuples/tuple_creation.c или src/canvas.c), чтобы тест прошел.

Запусти make booktest снова. Тест должен пройти (Green фаза).

Рефакторинг (если нужно): Улучши код, сохранив прохождение тестов.

Повторяй для следующих сценариев.

Шаг 4: Удаление тестового материала перед сдачей проекта
Удали файл book_tests.c из корня проекта.

В Makefile удали все строки между комментариями:

# >>>>>>>>>>>>>>>>>>>>> BOOK TESTS SECTION START >>>>>>>>>>>>>>>>>>>>>

и

# <<<<<<<<<<<<<<<<<<<<< BOOK TESTS SECTION END <<<<<<<<<<<<<<<<<<<<<<<
Это удалит переменные, правила и упоминания в clean/fclean/.PHONY, относящиеся к тестам книги.

Запусти make fclean, чтобы удалить все сгенерированные файлы, включая run_book_tests и его объектные файлы.

Преимущества этого подхода:

Простота: Один главный файл для всех тестов книги. Легко добавлять новые тесты.

Минимальные изменения в Makefile: Добавляется один четко выделенный блок.

Легкость удаления: Удаляешь один файл и один блок в Makefile.

Понятность: Ясно, какая часть Makefile и какой файл относятся к тестам книги.

Сохранение структуры obj/: Объектные файлы для тестов также будут попадать в $(OBJ_DIR), что поддерживает общую чистоту проекта.

Этот метод должен обеспечить тебе простой и понятный способ работы с материалом книги, не усложняя чрезмерно структуру проекта или Makefile, и позволяя легко избавиться от тестового кода перед сдачей miniRT.

# <<<<<<<<<<<<<<<<< Пояснения к Makefile: <<<<<<<<<<<<<<<<<<<

Четкие секции: Я добавил комментарии >>> BOOK TESTS SECTION START >>> и <<< BOOK TESTS SECTION END <<< вокруг всех частей, относящихся к тестам книги. Это делает их легко идентифицируемыми.

BOOK_TEST_RUNNER_SRC: Указывает на твой единственный файл с тестами.

BOOK_TEST_MODULE_SRCS: Здесь ты будешь перечислять .c файлы из папки src/, которые содержат код, реализуемый по книге и необходимый для тестов.

BOOK_TEST_RUNNER_OBJ и BOOK_TEST_MODULE_OBJS: Формируют списки объектных файлов.

Новое правило компиляции: $(BOOK_TEST_RUNNER_OBJ): $(BOOK_TEST_RUNNER_SRC) специально для book_tests.c. Оно поместит book_tests.o в $(OBJ_DIR).

Цель booktest: Собирает и запускает $(BOOK_TEST_EXECUTABLE).

Очистка: Добавлены команды для удаления объектных файлов и исполняемого файла тестов в clean и fclean.